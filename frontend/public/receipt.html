<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="theme-color" content="#000000">
<title>Fi≈ü</title>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: #f5f5f5;
  color: #333;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  min-height: 100vh;
  padding: 20px;
}

.receipt-container {
  max-width: 400px;
  margin: 0 auto;
}

.receipt-card {
  background: #fff;
  border-radius: 12px;
  padding: 24px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.shop-name {
  font-size: 20px;
  font-weight: 700;
  text-align: center;
  margin-bottom: 4px;
}

.receipt-date {
  font-size: 13px;
  color: #888;
  text-align: center;
  margin-bottom: 20px;
}

.divider {
  border-top: 1px dashed #ddd;
  margin: 16px 0;
}

.item-row {
  display: flex;
  justify-content: space-between;
  padding: 6px 0;
  font-size: 14px;
}

.item-name {
  flex: 1;
  color: #333;
}

.item-price {
  font-weight: 600;
  color: #333;
}

.total-row {
  display: flex;
  justify-content: space-between;
  font-size: 18px;
  font-weight: 700;
  padding-top: 12px;
  border-top: 2px solid #333;
  margin-top: 12px;
}

.payment-row {
  display: flex;
  justify-content: space-between;
  font-size: 13px;
  color: #666;
  margin-top: 8px;
}

.footer {
  text-align: center;
  margin-top: 20px;
  font-size: 12px;
  color: #999;
}

.error-state {
  text-align: center;
  padding: 60px 20px;
  color: #999;
}

.error-icon {
  font-size: 48px;
  margin-bottom: 16px;
}
</style>
</head>
<body>

<div class="receipt-container">
  <div id="content">
    <div class="error-state">
      <div class="error-icon">üìÑ</div>
      <div>Fi≈ü y√ºkleniyor...</div>
    </div>
  </div>
</div>

<script>
// SELF-CONTAINED RECEIPT PAGE
// NO database access
// NO POS navigation
// Data comes ONLY from URL parameter

function decodeReceiptData(encoded) {
  try {
    const decoded = decodeURIComponent(encoded);
    return JSON.parse(decoded);
  } catch (e) {
    return null;
  }
}

function renderReceipt(data) {
  const itemsHtml = data.items.map(item => `
    <div class="item-row">
      <span class="item-name">${item.name}</span>
      <span class="item-price">‚Ç∫${item.price.toFixed(2)}</span>
    </div>
  `).join('');
  
  document.getElementById('content').innerHTML = `
    <div class="receipt-card">
      <div class="shop-name">${data.shop || 'Market'}</div>
      <div class="receipt-date">${data.date}</div>
      
      <div class="divider"></div>
      
      ${itemsHtml}
      
      <div class="divider"></div>
      
      <div class="total-row">
        <span>Toplam:</span>
        <span>‚Ç∫${data.total.toFixed(2)}</span>
      </div>
      
      <div class="payment-row">
        <span>√ñdeme:</span>
        <span>${data.payment}</span>
      </div>
    </div>
    
    <div class="footer">
      Te≈üekk√ºrler, iyi g√ºnler!
    </div>
  `;
}

function renderError() {
  document.getElementById('content').innerHTML = `
    <div class="error-state">
      <div class="error-icon">‚ö†Ô∏è</div>
      <div>Fi≈ü bulunamadƒ±</div>
    </div>
  `;
}

// Initialize
(function() {
  const params = new URLSearchParams(window.location.search);
  const receiptData = params.get('data');
  
  if (receiptData) {
    const data = decodeReceiptData(receiptData);
    if (data && data.items && data.total !== undefined) {
      renderReceipt(data);
    } else {
      renderError();
    }
  } else {
    renderError();
  }
})();
</script>

</body>
</html>
